// <copyright file="MasterSkillExtensions.cs" company="MUnique">
// Licensed under the MIT License. See LICENSE file in the project root for full license information.
// </copyright>

namespace MUnique.OpenMU.GameServer.RemoteView;

using MUnique.OpenMU.DataModel.Configuration;
using MUnique.OpenMU.Network.Packets;

/// <summary>
/// Extension methods regarding master skills.
/// </summary>
public static class MasterSkillExtensions
{
    private const short GrandMasterNumber = 3;
    private const short BattleMaster = 7;
    private const short HighElf = 11;
    private const short DuelMaster = 13;
    private const short LordEmperor = 17;
    private const short DimensionMaster = 0xB8 >> 3;
    private const short FistMaster = 0xC8 >> 3;

    private static readonly IDictionary<short, IDictionary<short, byte>> SkillNumberToIndex = new SortedDictionary<short, IDictionary<short, byte>>
    {
        {
            GrandMasterNumber, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 334, 51 },
                { 338, 55 },
                { 347, 73 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 362, 92 },
                { 378, 41 },
                { 379, 42 },
                { 380, 43 },
                { 381, 45 },
                { 382, 46 },
                { 383, 47 },
                { 384, 48 },
                { 385, 49 },
                { 386, 50 },
                { 387, 52 },
                { 388, 54 },
                { 389, 56 },
                { 397, 77 },
                { 398, 78 },
                { 399, 79 },
                { 400, 81 },
                { 401, 82 },
                { 402, 83 },
                { 403, 85 },
                { 404, 89 },
                { 405, 90 },
            }
        },
        {
            BattleMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 326, 41 },
                { 327, 42 },
                { 328, 43 },
                { 329, 44 },
                { 330, 45 },
                { 331, 46 },
                { 332, 49 },
                { 333, 50 },
                { 334, 51 },
                { 335, 52 },
                { 336, 53 },
                { 337, 54 },
                { 338, 55 },
                { 347, 73 },
                { 348, 77 },
                { 349, 78 },
                { 350, 79 },
                { 351, 80 },
                { 352, 81 },
                { 353, 82 },
                { 354, 83 },
                { 355, 84 },
                { 356, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 360, 89 },
                { 361, 90 },
                { 362, 92 },
            }
        },
        {
            HighElf, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 334, 52 },
                { 338, 56 },
                { 347, 73 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 362, 92 },
                { 413, 41 },
                { 414, 43 },
                { 415, 44 },
                { 416, 45 },
                { 417, 46 },
                { 418, 47 },
                { 419, 48 },
                { 420, 49 },
                { 421, 51 },
                { 422, 53 },
                { 423, 54 },
                { 424, 55 },
                { 435, 77 },
                { 436, 78 },
                { 437, 79 },
                { 438, 81 },
                { 439, 82 },
                { 440, 83 },
                { 441, 89 },
                { 442, 90 },
            }
        },
        {
            DuelMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 334, 52 },
                { 338, 56 },
                { 347, 73 },
                { 348, 77 },
                { 349, 78 },
                { 352, 81 },
                { 353, 82 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 90 },
                { 362, 92 },
                { 397, 79 },
                { 398, 80 },
                { 400, 83 },
                { 401, 84 },
                { 405, 89 },
                { 479, 41 },
                { 480, 42 },
                { 481, 43 },
                { 482, 44 },
                { 483, 45 },
                { 484, 46 },
                { 485, 48 },
                { 486, 49 },
                { 487, 50 },
                { 488, 51 },
                { 489, 53 },
                { 490, 54 },
            }
        },
        {
            LordEmperor, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 334, 52 },
                { 338, 56 },
                { 347, 73 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 91 },
                { 362, 92 },
                { 508, 41 },
                { 509, 42 },
                { 510, 43 },
                { 511, 46 },
                { 512, 47 },
                { 513, 48 },
                { 514, 49 },
                { 515, 50 },
                { 516, 51 },
                { 517, 54 },
                { 518, 55 },
                { 526, 77 },
                { 527, 78 },
                { 528, 79 },
                { 529, 80 },
                { 530, 81 },
                { 531, 82 },
                { 532, 83 },
                { 533, 84 },
                { 534, 89 },
                { 535, 90 },
            }
        },
        {
            DimensionMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 7 },
                { 304, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 11 },
                { 308, 12 },
                { 309, 14 },
                { 310, 15 },
                { 311, 16 },
                { 312, 17 },
                { 313, 18 },
                { 325, 37 },
                { 334, 52 },
                { 338, 56 },
                { 347, 73 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 362, 92 },
                { 448, 41 },
                { 449, 42 },
                { 450, 43 },
                { 451, 45 },
                { 452, 46 },
                { 453, 47 },
                { 454, 48 },
                { 455, 49 },
                { 456, 50 },
                { 457, 53 },
                { 458, 55 },
                { 465, 77 },
                { 466, 78 },
                { 467, 81 },
                { 468, 82 },
                { 469, 85 },
                { 470, 89 },
                { 471, 90 },
            }
        },
        {
            FistMaster, new SortedDictionary<short, byte>
            {
                { 325, 37 },
                { 578, 1 },
                { 579, 4 },
                { 580, 6 },
                { 581, 7 },
                { 582, 8 },
                { 583, 9 },
                { 584, 10 },
                { 585, 11 },
                { 586, 12 },
                { 587, 14 },
                { 588, 15 },
                { 589, 16 },
                { 590, 17 },
                { 591, 18 },
                { 599, 37 },
                { 551, 41 },
                { 552, 42 },
                { 554, 45 },
                { 555, 46 },
                { 600, 51 },
                { 557, 52 },
                { 558, 53 },
                { 559, 54 },
                { 601, 55 },
                { 560, 56 },
                { 603, 73 },
                { 568, 77 },
                { 569, 78 },
                { 571, 81 },
                { 572, 82 },
                { 573, 85 },
                { 604, 86 },
                { 605, 87 },
                { 606, 88 },
                { 607, 90 },
                { 608, 92 },
            }
        },
    };

    private static readonly IDictionary<short, IDictionary<short, byte>> SkillNumberToIndexS21 = new SortedDictionary<short, IDictionary<short, byte>>
    {
        {
            (short)CharacterClassNumberS21.GrandMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 322, 30 },
                { 324, 34 },
                { 626, 35 },
                { 325, 37 },
                { 811, 42 },
                { 810, 43 },
                { 812, 44 },
                { 802, 41 },
                { 335, 46 },
                { 803, 47 },
                { 336, 49 },
                { 804, 51 },
                { 334, 52 },
                { 339, 53 },
                { 338, 56 },
                { 807, 59 },
                { 806, 55 },
                { 341, 60 },
                { 809, 63 },
                { 345, 57 },
                { 743, 64 },
                { 344, 66 },
                { 813, 61 },
                { 346, 70 },
                { 347, 73 },
                { 348, 77 },
                { 349, 78 },
                { 350, 79 },
                { 351, 80 },
                { 352, 81 },
                { 353, 82 },
                { 354, 83 },
                { 355, 84 },
                { 356, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 360, 89 },
                { 361, 90 },
                { 362, 92 },
                { 363, 93 },
                { 364, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 628, 99 },
                { 369, 100 },
                { 630, 101 },
                { 372, 102 },
                { 370, 104 },
                { 629, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.BladeMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 375, 30 },
                { 634, 32 },
                { 377, 34 },
                { 637, 35 },
                { 636, 36 },
                { 325, 37 },
                { 378, 41 },
                { 379, 42 },
                { 380, 43 },
                { 381, 45 },
                { 382, 46 },
                { 383, 47 },
                { 385, 49 },
                { 386, 50 },
                { 334, 51 },
                { 387, 52 },
                { 388, 54 },
                { 338, 55 },
                { 389, 56 },
                { 390, 57 },
                { 341, 59 },
                { 391, 60 },
                { 392, 62 },
                { 743, 63 },
                { 495, 66 },
                { 642, 69 },
                { 497, 70 },
                { 347, 73 },
                { 397, 77 },
                { 398, 78 },
                { 399, 79 },
                { 400, 81 },
                { 401, 82 },
                { 402, 83 },
                { 403, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 404, 89 },
                { 405, 90 },
                { 362, 92 },
                { 406, 93 },
                { 407, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 639, 99 },
                { 369, 100 },
                { 641, 101 },
                { 372, 102 },
                { 370, 104 },
                { 640, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.HighElf, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 410, 30 },
                { 643, 32 },
                { 412, 34 },
                { 646, 35 },
                { 645, 36 },
                { 325, 37 },
                { 413, 41 },
                { 414, 43 },
                { 415, 44 },
                { 416, 45 },
                { 417, 46 },
                { 418, 47 },
                { 419, 48 },
                { 420, 49 },
                { 421, 51 },
                { 334, 52 },
                { 422, 53 },
                { 423, 54 },
                { 424, 55 },
                { 338, 56 },
                { 876, 57 },
                { 425, 58 },
                { 411, 59 },
                { 341, 60 },
                { 426, 61 },
                { 743, 63 },
                { 428, 64 },
                { 429, 65 },
                { 430, 66 },
                { 427, 67 },
                { 432, 68 },
                { 651, 69 },
                { 433, 70 },
                { 434, 71 },
                { 652, 72 },
                { 347, 73 },
                { 435, 77 },
                { 436, 78 },
                { 437, 79 },
                { 438, 81 },
                { 439, 82 },
                { 440, 83 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 441, 89 },
                { 442, 90 },
                { 362, 92 },
                { 443, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 648, 99 },
                { 369, 100 },
                { 650, 101 },
                { 372, 102 },
                { 370, 104 },
                { 649, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.DimensionMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 446, 30 },
                { 447, 34 },
                { 656, 35 },
                { 325, 37 },
                { 774, 41 },
                { 775, 42 },
                { 776, 43 },
                { 455, 45 },
                { 777, 47 },
                { 454, 48 },
                { 456, 49 },
                { 778, 51 },
                { 334, 52 },
                { 457, 53 },
                { 458, 55 },
                { 338, 56 },
                { 459, 57 },
                { 460, 58 },
                { 341, 60 },
                { 772, 61 },
                { 773, 62 },
                { 743, 64 },
                { 461, 66 },
                { 347, 73 },
                { 465, 77 },
                { 466, 78 },
                { 467, 81 },
                { 468, 82 },
                { 358, 87 },
                { 469, 89 },
                { 770, 90 },
                { 357, 86 },
                { 359, 88 },
                { 470, 93 },
                { 771, 94 },
                { 471, 91 },
                { 362, 92 },
                { 473, 95 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 658, 99 },
                { 369, 100 },
                { 660, 101 },
                { 372, 102 },
                { 370, 104 },
                { 659, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.DuelMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 476, 30 },
                { 664, 31 },
                { 663, 32 },
                { 478, 34 },
                { 666, 35 },
                { 665, 36 },
                { 325, 37 },
                { 479, 41 },
                { 480, 42 },
                { 481, 43 },
                { 482, 44 },
                { 483, 45 },
                { 484, 46 },
                { 485, 48 },
                { 490, 49 },
                { 487, 50 },
                { 488, 51 },
                { 334, 52 },
                { 493, 53 },
                { 496, 55 },
                { 338, 56 },
                { 865, 57 },
                { 867, 58 },
                { 869, 59 },
                { 341, 60 },
                { 866, 61 },
                { 868, 62 },
                { 870, 63 },
                { 743, 64 },
                { 344, 66 },
                { 495, 67 },
                { 346, 70 },
                { 497, 71 },
                { 347, 73 },
                { 871, 77 },
                { 349, 78 },
                { 397, 79 },
                { 872, 80 },
                { 873, 81 },
                { 353, 82 },
                { 400, 83 },
                { 874, 84 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 405, 89 },
                { 361, 90 },
                { 362, 92 },
                { 407, 93 },
                { 364, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 668, 99 },
                { 369, 100 },
                { 372, 102 },
                { 370, 104 },
                { 669, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.LordEmperor, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 506, 21 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 505, 30 },
                { 670, 32 },
                { 507, 34 },
                { 673, 35 },
                { 672, 36 },
                { 325, 37 },
                { 508, 41 },
                { 518, 42 },
                { 523, 43 },
                { 519, 44 },
                { 520, 46 },
                { 513, 47 },
                { 911, 49 },
                { 510, 50 },
                { 334, 52 },
                { 915, 53 },
                { 512, 54 },
                { 338, 56 },
                { 914, 58 },
                { 341, 60 },
                { 743, 64 },
                { 912, 68 },
                { 347, 73 },
                { 533, 77 },
                { 527, 78 },
                { 528, 79 },
                { 530, 81 },
                { 531, 82 },
                { 532, 83 },
                { 534, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 511, 89 },
                { 361, 91 },
                { 362, 92 },
                { 913, 94 },
                { 364, 95 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 675, 99 },
                { 369, 100 },
                { 538, 101 },
                { 372, 102 },
                { 370, 104 },
                { 676, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.FistMaster, new SortedDictionary<short, byte>
            {
                { 578, 1 },
                { 579, 4 },
                { 580, 6 },
                { 581, 8 },
                { 583, 9 },
                { 584, 10 },
                { 585, 12 },
                { 587, 14 },
                { 746, 15 },
                { 588, 16 },
                { 590, 17 },
                { 591, 18 },
                { 593, 23 },
                { 594, 24 },
                { 595, 25 },
                { 596, 26 },
                { 597, 27 },
                { 598, 28 },
                { 549, 30 },
                { 550, 34 },
                { 680, 35 },
                { 599, 37 },
                { 551, 41 },
                { 552, 42 },
                { 744, 43 },
                { 554, 45 },
                { 555, 46 },
                { 745, 47 },
                { 600, 51 },
                { 557, 52 },
                { 558, 53 },
                { 559, 54 },
                { 601, 55 },
                { 560, 56 },
                { 602, 59 },
                { 743, 61 },
                { 563, 62 },
                { 564, 63 },
                { 565, 66 },
                { 567, 70 },
                { 603, 73 },
                { 568, 77 },
                { 569, 78 },
                { 571, 81 },
                { 572, 82 },
                { 573, 85 },
                { 604, 86 },
                { 605, 87 },
                { 606, 88 },
                { 607, 90 },
                { 608, 92 },
                { 609, 94 },
                { 610, 96 },
                { 611, 97 },
                { 612, 98 },
                { 682, 99 },
                { 613, 100 },
                { 616, 102 },
                { 614, 104 },
                { 683, 107 },
                { 615, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.MirageLancer, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 685, 30 },
                { 713, 32 },
                { 686, 34 },
                { 716, 35 },
                { 715, 36 },
                { 325, 37 },
                { 329, 41 },
                { 688, 42 },
                { 687, 43 },
                { 689, 48 },
                { 693, 49 },
                { 691, 50 },
                { 690, 51 },
                { 334, 52 },
                { 696, 54 },
                { 692, 55 },
                { 338, 56 },
                { 699, 57 },
                { 698, 58 },
                { 695, 59 },
                { 341, 60 },
                { 896, 62 },
                { 894, 63 },
                { 743, 64 },
                { 700, 66 },
                { 701, 70 },
                { 347, 73 },
                { 702, 77 },
                { 703, 78 },
                { 704, 80 },
                { 705, 81 },
                { 706, 82 },
                { 707, 84 },
                { 895, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 90 },
                { 362, 92 },
                { 364, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 718, 99 },
                { 369, 100 },
                { 372, 102 },
                { 370, 104 },
                { 711, 105 },
                { 712, 106 },
                { 719, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.GrandRuneMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 754, 30 },
                { 758, 32 },
                { 755, 34 },
                { 759, 35 },
                { 756, 36 },
                { 325, 37 },
                { 380, 41 },
                { 916, 42 },
                { 378, 43 },
                { 748, 44 },
                { 383, 45 },
                { 381, 47 },
                { 749, 48 },
                { 765, 49 },
                { 768, 50 },
                { 334, 51 },
                { 386, 52 },
                { 766, 53 },
                { 769, 54 },
                { 338, 55 },
                { 391, 57 },
                { 341, 59 },
                { 750, 60 },
                { 743, 63 },
                { 751, 64 },
                { 495, 66 },
                { 497, 70 },
                { 347, 73 },
                { 752, 77 },
                { 399, 79 },
                { 753, 81 },
                { 402, 83 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 405, 90 },
                { 362, 92 },
                { 407, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 761, 99 },
                { 369, 100 },
                { 763, 101 },
                { 372, 102 },
                { 370, 104 },
                { 762, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.MasterSlayer, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 785, 30 },
                { 791, 31 },
                { 786, 34 },
                { 790, 35 },
                { 325, 37 },
                { 326, 41 },
                { 779, 44 },
                { 330, 45 },
                { 331, 46 },
                { 780, 48 },
                { 334, 51 },
                { 789, 52 },
                { 338, 55 },
                { 781, 58 },
                { 341, 59 },
                { 782, 62 },
                { 743, 63 },
                { 794, 65 },
                { 631, 67 },
                { 787, 68 },
                { 788, 72 },
                { 347, 73 },
                { 783, 77 },
                { 784, 81 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 90 },
                { 362, 92 },
                { 364, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 792, 99 },
                { 369, 100 },
                { 630, 101 },
                { 372, 102 },
                { 370, 104 },
                { 793, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.MasterGunBreaker, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 814, 25 },
                { 815, 26 },
                { 816, 27 },
                { 817, 28 },
                { 818, 30 },
                { 819, 34 },
                { 626, 35 },
                { 325, 37 },
                { 386, 49 },
                { 828, 53 },
                { 820, 54 },
                { 829, 57 },
                { 821, 58 },
                { 334, 52 },
                { 822, 62 },
                { 338, 56 },
                { 823, 42 },
                { 341, 60 },
                { 824, 46 },
                { 743, 64 },
                { 825, 43 },
                { 826, 47 },
                { 835, 44 },
                { 836, 48 },
                { 347, 73 },
                { 831, 78 },
                { 832, 82 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 405, 90 },
                { 362, 92 },
                { 407, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 628, 99 },
                { 369, 100 },
                { 372, 102 },
                { 370, 104 },
                { 629, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.ShineWizard, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 837, 30 },
                { 838, 34 },
                { 839, 35 },
                { 325, 37 },
                { 843, 41 },
                { 379, 42 },
                { 380, 43 },
                { 844, 45 },
                { 382, 46 },
                { 383, 47 },
                { 334, 51 },
                { 845, 52 },
                { 389, 53 },
                { 338, 55 },
                { 846, 58 },
                { 341, 59 },
                { 847, 62 },
                { 743, 63 },
                { 495, 66 },
                { 642, 69 },
                { 497, 70 },
                { 347, 73 },
                { 397, 77 },
                { 859, 79 },
                { 400, 81 },
                { 860, 83 },
                { 861, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 862, 89 },
                { 405, 90 },
                { 362, 92 },
                { 863, 93 },
                { 407, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 639, 99 },
                { 369, 100 },
                { 641, 101 },
                { 372, 102 },
                { 370, 104 },
                { 640, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.ArchMage, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 840, 30 },
                { 634, 32 },
                { 841, 34 },
                { 842, 35 },
                { 636, 36 },
                { 325, 37 },
                { 848, 41 },
                { 378, 42 },
                { 380, 43 },
                { 858, 44 },
                { 849, 45 },
                { 381, 46 },
                { 383, 47 },
                { 851, 48 },
                { 850, 49 },
                { 853, 50 },
                { 334, 51 },
                { 852, 52 },
                { 389, 53 },
                { 854, 54 },
                { 338, 55 },
                { 391, 57 },
                { 855, 58 },
                { 341, 59 },
                { 425, 60 },
                { 856, 62 },
                { 743, 63 },
                { 495, 66 },
                { 857, 68 },
                { 497, 70 },
                { 347, 73 },
                { 864, 77 },
                { 875, 81 },
                { 399, 79 },
                { 402, 83 },
                { 357, 85 },
                { 358, 87 },
                { 359, 88 },
                { 405, 89 },
                { 362, 92 },
                { 407, 93 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 639, 99 },
                { 369, 100 },
                { 641, 101 },
                { 372, 102 },
                { 370, 104 },
                { 640, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.IllusionMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 890, 30 },
                { 888, 31 },
                { 891, 34 },
                { 889, 35 },
                { 325, 37 },
                { 877, 41 },
                { 878, 45 },
                { 335, 46 },
                { 879, 47 },
                { 885, 49 },
                { 880, 51 },
                { 334, 52 },
                { 886, 53 },
                { 883, 54 },
                { 338, 56 },
                { 887, 57 },
                { 884, 58 },
                { 341, 60 },
                { 881, 63 },
                { 743, 64 },
                { 882, 67 },
                { 347, 73 },
                { 892, 77 },
                { 893, 81 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 90 },
                { 362, 92 },
                { 364, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 628, 99 },
                { 369, 100 },
                { 630, 101 },
                { 372, 102 },
                { 370, 104 },
                { 629, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.AlchemicMaster, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 897, 30 },
                { 898, 34 },
                { 899, 35 },
                { 325, 37 },
                { 900, 41 },
                { 378, 42 },
                { 380, 43 },
                { 379, 44 },
                { 901, 45 },
                { 381, 46 },
                { 383, 47 },
                { 382, 48 },
                { 902, 49 },
                { 334, 51 },
                { 387, 52 },
                { 338, 55 },
                { 389, 56 },
                { 390, 57 },
                { 903, 58 },
                { 341, 59 },
                { 391, 60 },
                { 904, 62 },
                { 743, 63 },
                { 495, 66 },
                { 905, 68 },
                { 642, 69 },
                { 497, 70 },
                { 906, 72 },
                { 347, 73 },
                { 907, 77 },
                { 909, 79 },
                { 910, 83 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 405, 90 },
                { 362, 92 },
                { 407, 94 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 639, 99 },
                { 369, 100 },
                { 641, 101 },
                { 372, 102 },
                { 370, 104 },
                { 640, 107 },
                { 371, 108 },
            }
        },
        {
            (short)CharacterClassNumberS21.MasterPaladin, new SortedDictionary<short, byte>
            {
                { 300, 1 },
                { 301, 4 },
                { 302, 6 },
                { 303, 8 },
                { 305, 9 },
                { 306, 10 },
                { 307, 12 },
                { 309, 14 },
                { 746, 15 },
                { 310, 16 },
                { 312, 17 },
                { 313, 18 },
                { 315, 23 },
                { 316, 24 },
                { 317, 25 },
                { 318, 26 },
                { 319, 27 },
                { 320, 28 },
                { 917, 30 },
                { 670, 32 },
                { 918, 34 },
                { 673, 35 },
                { 672, 36 },
                { 325, 37 },
                { 919, 41 },
                { 811, 42 },
                { 812, 43 },
                { 920, 45 },
                { 925, 47 },
                { 921, 50 },
                { 334, 52 },
                { 923, 54 },
                { 338, 56 },
                { 341, 60 },
                { 813, 61 },
                { 743, 64 },
                { 344, 66 },
                { 346, 70 },
                { 347, 73 },
                { 926, 77 },
                { 704, 78 },
                { 927, 81 },
                { 707, 82 },
                { 928, 85 },
                { 357, 86 },
                { 358, 87 },
                { 359, 88 },
                { 361, 91 },
                { 362, 92 },
                { 364, 95 },
                { 366, 96 },
                { 367, 97 },
                { 368, 98 },
                { 628, 99 },
                { 369, 100 },
                { 630, 101 },
                { 372, 102 },
                { 370, 104 },
                { 629, 107 },
                { 371, 108 },
            }
        },
    };

    /// <summary>
    /// Gets the index of the master skill on the clients master skill tree for the given character class.
    /// </summary>
    /// <param name="skill">The skill.</param>
    /// <param name="characterClass">The character class.</param>
    /// <returns>The index of the master skill on the clients master skill tree for the given character class.</returns>
    /// <remarks>
    /// Each possible visible slot of a master skill in the master skill tree is identified
    /// by an index. Each root has 36 slots (4 * 9), and roots are indexed one after another,
    /// that means left root starts at index 1, middle root at 37, right root at 73.
    /// As this display can differ between character classes, we have to pass it in here.
    /// To me, it's a mystery why Webzen can't work with the skill number alone and determine
    /// this index on client side.
    /// I decided to put this indexes into code since it would pollute the data model too much.
    /// </remarks>
    public static byte GetMasterSkillIndex(this Skill skill, CharacterClass characterClass)
    {
        if (skill.MasterDefinition is null)
        {
            return 0;
        }

        if (SkillNumberToIndex.TryGetValue(characterClass.Number, out var skillToIndexOfClass)
            && skillToIndexOfClass.TryGetValue(skill.Number, out var index))
        {
            return index;
        }

        return 0;
    }

    public static byte GetMasterSkillIndexS21(this Skill skill, CharacterClass characterClass)
    {
        if (skill.MasterDefinition is null)
        {
            return 0;
        }

        if (SkillNumberToIndexS21.TryGetValue((short)(characterClass.Number & ~3), out var skillToIndexOfClass)
            && skillToIndexOfClass.TryGetValue(skill.Number, out var index))
        {
            return index;
        }

        return 0;
    }
}